<div class="container mt-4" style="margin-bottom: 30px">
  <div *ngIf="loading">Loading form...</div>
  <ng-container *ngIf="!loading">
    <h3 class="mb-4">Update Case</h3>
    <form (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label class="form-label">Case Title</label>
        <input
          type="text"
          name="case_title"
          [value]="formData.case_title || ''"
          (input)="onChange('case_title', $any($event.target).value)"
          class="form-control"
          [class.is-invalid]="errors.case_title"
        />
        <div *ngIf="errors.case_title" class="invalid-feedback">{{ errors.case_title }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Case Type</label>
        <select
          name="case_type"
          [value]="formData.case_type || ''"
          (change)="onChange('case_type', $any($event.target).value)"
          class="form-select"
          [class.is-invalid]="errors.case_type"
        >
          <option value="">Select Case Type</option>
          <option value="Homicide (Murder)">Homicide (Murder)</option>
          <option value="Manslaughter">Manslaughter</option>
          <option value="Rape / Sexual Assault">Rape / Sexual Assault</option>
          <option value="Kidnapping / Abduction">Kidnapping / Abduction</option>
          <option value="Aggravated Assault">Aggravated Assault</option>
          <option value="Simple Assault / Battery">Simple Assault / Battery</option>
          <option value="Robbery">Robbery</option>
          <option value="Burglary / House Breaking">Burglary / House Breaking</option>
          <option value="Theft (Larceny)">Theft (Larceny)</option>
          <option value="Motor Vehicle Theft">Motor Vehicle Theft</option>
          <option value="Vandalism / Criminal Damage">Vandalism / Criminal Damage</option>
          <option value="Extortion / Blackmail">Extortion / Blackmail</option>
          <option value="Cybercrime / Hacking">Cybercrime / Hacking</option>
          <option value="Fraud / Cheating">Fraud / Cheating</option>
          <option value="Forgery / Counterfeiting">Forgery / Counterfeiting</option>
          <option value="Embezzlement / Breach of Trust">Embezzlement / Breach of Trust</option>
          <option value="Money Laundering">Money Laundering</option>
          <option value="Drug Offense (NDPS)">Drug Offense (NDPS)</option>
          <option value="Smuggling / Contraband">Smuggling / Contraband</option>
          <option value="Illegal Weapons">Illegal Weapons</option>
          <option value="Illegal Gambling">Illegal Gambling</option>
          <option value="Public Order / Rioting">Public Order / Rioting</option>
          <option value="Domestic Violence">Domestic Violence</option>
          <option value="Missing Person Report">Missing Person Report</option>
          <option value="Traffic Accident (Non-Fatal)">Traffic Accident (Non-Fatal)</option>
        </select>
        <div *ngIf="errors.case_type" class="invalid-feedback">{{ errors.case_type }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea
          name="case_description"
          [value]="formData.case_description || ''"
          (input)="onChange('case_description', $any($event.target).value)"
          class="form-control"
          rows="5"
          [class.is-invalid]="errors.case_description"
        ></textarea>
        <div *ngIf="errors.case_description" class="invalid-feedback">{{ errors.case_description }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Suspects</label>
        <input
          type="text"
          name="suspects"
          [value]="formData.suspects || ''"
          (input)="onChange('suspects', $any($event.target).value)"
          class="form-control"
          [class.is-invalid]="errors.suspects"
        />
        <div *ngIf="errors.suspects" class="invalid-feedback">{{ errors.suspects }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Victim</label>
        <input
          type="text"
          name="victim"
          [value]="formData.victim || ''"
          (input)="onChange('victim', $any($event.target).value)"
          class="form-control"
          [class.is-invalid]="errors.victim"
        />
        <div *ngIf="errors.victim" class="invalid-feedback">{{ errors.victim }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Guilty Name</label>
        <input
          type="text"
          name="guilty_name"
          [value]="formData.guilty_name || ''"
          (input)="onChange('guilty_name', $any($event.target).value)"
          class="form-control"
          [class.is-invalid]="errors.guilty_name"
        />
        <div *ngIf="errors.guilty_name" class="invalid-feedback">{{ errors.guilty_name }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Case Date</label>
        <input
          type="date"
          name="case_date"
          [value]="formData.case_date || ''"
          (input)="onChange('case_date', $any($event.target).value)"
          class="form-control"
          [class.is-invalid]="errors.case_date"
          [max]="todayStr"
        />
        <div *ngIf="errors.case_date" class="invalid-feedback">{{ errors.case_date }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Case Handler (Assign Officer)</label>
        <select
          name="case_handler"
          [value]="formData.case_handler || ''"
          (change)="onChange('case_handler', $any($event.target).value)"
          class="form-select"
          [class.is-invalid]="errors.case_handler"
        >
          <option value="">Select Officer</option>
          <option *ngFor="let name of officers" [value]="name">{{ name }}</option>
        </select>
        <div *ngIf="errors.case_handler" class="invalid-feedback">{{ errors.case_handler }}</div>
      </div>
      <div class="mb-3">
        <label class="form-label">Status</label>
        <select
          name="status"
          [value]="formData.status || ''"
          (change)="onChange('status', $any($event.target).value)"
          class="form-select"
          [class.is-invalid]="errors.status"
        >
          <option value="ACTIVE">ACTIVE</option>
          <option value="CLOSE">CLOSE</option>
        </select>
        <div *ngIf="errors.status" class="invalid-feedback">{{ errors.status }}</div>
      </div>
      <button type="submit" class="btn btn-success">Update Case</button>
      <a routerLink="/admin/update-case" class="btn btn-secondary ms-2">Cancel</a>
    </form>
  </ng-container>
</div>
